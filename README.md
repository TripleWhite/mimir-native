# Mimir-Native

**ä¸ªäºº AI è®°å¿†ä¸­æ¢ç³»ç»Ÿ** - åŸºäº SQLite + å‘é‡ç´¢å¼•çš„æœ¬åœ°åŒ–è®°å¿†å±‚

[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## ğŸ¯ é¡¹ç›®æ„¿æ™¯

Mimir æ˜¯ä¸ªäºº AI ç”Ÿæ€çš„**è®°å¿†ä¸­æ¢**ã€‚

> *"ç”¨æˆ·ä¸æƒ³å­¦ä¼šå¦‚ä½•æ“ä½œ Agentï¼Œç”¨æˆ·åªæƒ³è¦ç»“æœã€‚"*

å½“ç”¨æˆ·è¯´ï¼š
```
"Mimirï¼Œå¸®æˆ‘å‰ªä¸ªè§†é¢‘ï¼Œä¸»é¢˜æ˜¯æˆ‘ä»Šå¤©æ”¶è—çš„å…³äºæ–°ä¸­å¼çš„è®¾è®¡ç†å¿µã€‚
ç´ æç”¨æˆ‘çœ¼é•œæ‹çš„ï¼Œæ—ç™½å‚è€ƒæˆ‘æ˜¨å¤©åœ¨ Plaud é‡Œå½•çš„é‚£æ®µäº§å“ç†å¿µã€‚"
```

åªæœ‰ Mimir èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒæ‹¥æœ‰**å®Œæ•´çš„ç”¨æˆ·è®°å¿†**ï¼ˆè·¨å¹³å°ã€è·¨è®¾å¤‡ã€è·¨æ—¶é—´ï¼‰ã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¾“å…¥å±‚ (Ingestion)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AI å¯¹è¯      â”‚ ç¤¾äº¤åª’ä½“     â”‚ æœ¬åœ°æ–‡ä»¶     â”‚ å®æ—¶æ•°æ®            â”‚
â”‚ (Claude)    â”‚ (å¾®ä¿¡æ”¶è—)   â”‚ (PDF/å›¾ç‰‡)  â”‚ (çœ¼é•œ/å½•éŸ³)         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚                 â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Processing å±‚ (å†…å®¹å¤„ç†)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. æ—¶åºæ ‡å‡†åŒ– (Temporal Normalization)                      â”‚
â”‚     - "yesterday" â†’ "7 May 2023"                           â”‚
â”‚     - "last year" â†’ "2022"                                  â”‚
â”‚                                                              â”‚
â”‚  2. äº‹å®æå– (Fact Extraction)                              â”‚
â”‚     - LLM æ™ºèƒ½æå–å®¢è§‚äº‹å®                                   â”‚
â”‚     - ä¿ç•™äººç‰©å±æ€§ã€äº‹ä»¶ã€è®¡åˆ’                                â”‚
â”‚                                                              â”‚
â”‚  3. å…ƒæ•°æ®æ ‡æ³¨ (Metadata Tagging)                           â”‚
â”‚     - å®ä½“è¯†åˆ« (Entities)                                    â”‚
â”‚     - ä¸»é¢˜åˆ†ç±» (Topics)                                      â”‚
â”‚     - æ—¶é—´ä¿¡æ¯ (Temporal)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å­˜å‚¨å±‚ (Storage)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SQLite + sqlite-vec                                         â”‚
â”‚  - æ–‡æœ¬å†…å®¹ + å‘é‡åµŒå…¥                                        â”‚
â”‚  - ç»“æ„åŒ–å…ƒæ•°æ®                                               â”‚
â”‚  - æ”¯æŒè¯­ä¹‰æ£€ç´¢ + å…³é”®è¯æ£€ç´¢                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 è°ƒç”¨å±‚ (Retrieval)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ··åˆæ£€ç´¢ç­–ç•¥ï¼š                                               â”‚
â”‚  - å‘é‡ç›¸ä¼¼åº¦ (è¯­ä¹‰åŒ¹é…)                                       â”‚
â”‚  - BM25 (å…³é”®è¯åŒ¹é…)                                          â”‚
â”‚  - æ—¶é—´èŒƒå›´è¿‡æ»¤                                               â”‚
â”‚  - å®ä½“æ ‡ç­¾è¿‡æ»¤                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/TripleWhite/mimir-native.git
cd mimir-native

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### åŸºç¡€ä½¿ç”¨

```python
from mimir_native import MimirMemory
from mimir_native.llm_client import BedrockClient

# åˆå§‹åŒ–
mimir = MimirMemory(db_path="mimir.db")
llm = BedrockClient()

# æ·»åŠ å†…å®¹
memories = mimir.add_content(
    content="Caroline visited the LGBTQ support group yesterday.",
    content_type="text",
    metadata={"session_date": "8 May 2023"}
)

# æŸ¥è¯¢è®°å¿†
results = mimir.query(
    query="When did Caroline go to the support group?",
    top_k=5
)

for r in results:
    print(r.memory.content)
    # è¾“å‡º: Caroline visited the LGBTQ support group on 07 May 2023
```

### LoCoMo æµ‹è¯•

```bash
# è¿è¡Œ LoCoMo åŸºå‡†æµ‹è¯•
python3 test_locomo_v3.py

# é¢„æœŸç»“æœï¼šF1 â‰ˆ 12%
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### LoCoMo åŸºå‡†æµ‹è¯•ç»“æœ

| ç‰ˆæœ¬ | F1 | EM | å…³é”®æ”¹è¿› |
|------|-----|-----|----------|
| V1 (åŸå§‹) | 10.33% | 0% | baseline |
| V2 (Prompt) | 8.86% | 0% | - |
| V3 (Pipeline) | **12.10%** | 0% | +17% â†‘ |

**å…³é”®çªç ´ï¼š**
- æ—¶åºæ ‡å‡†åŒ–ï¼š"yesterday" â†’ "07 May 2023"
- æ—¥æœŸè§£æï¼šæ”¯æŒ "1:56 pm on 8 May, 2023" æ ¼å¼
- ç­”æ¡ˆçº¦æŸï¼šå¼ºåˆ¶ç®€æ´å›ç­”ï¼ˆmax 10 wordsï¼‰

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| æ•°æ®åº“ | SQLite + sqlite-vec | æœ¬åœ°å‘é‡å­˜å‚¨ |
| LLM | AWS Bedrock (Mistral) | äº‹å®æå– + ç­”æ¡ˆç”Ÿæˆ |
| Embedding | Silicon Flow | æ–‡æœ¬å‘é‡åŒ– |
| æ—¶åºå¤„ç† | è‡ªå®šä¹‰ TemporalNormalizer | ç›¸å¯¹æ—¶é—´â†’ç»å¯¹æ—¶é—´ |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
mimir-native/
â”œâ”€â”€ src/mimir_native/
â”‚   â”œâ”€â”€ __init__.py              # ä¸»å…¥å£ MimirMemory
â”‚   â”œâ”€â”€ database.py              # SQLite + å‘é‡å­˜å‚¨
â”‚   â”œâ”€â”€ content_processor.py     # å†…å®¹å¤„ç† + æ—¶åºæ ‡å‡†åŒ–
â”‚   â”œâ”€â”€ ingestion_pipeline.py    # æ•°æ®æ‘„å…¥ç®¡é“
â”‚   â”œâ”€â”€ temporal_post_processor.py # æ—¶åºåå¤„ç†
â”‚   â”œâ”€â”€ retrieval/               # æ£€ç´¢æ¨¡å—
â”‚   â”‚   â””â”€â”€ hybrid_retriever.py  # æ··åˆæ£€ç´¢
â”‚   â””â”€â”€ llm_client.py            # LLM å®¢æˆ·ç«¯
â”œâ”€â”€ test_locomo_v3.py            # LoCoMo æµ‹è¯•è„šæœ¬
â”œâ”€â”€ CODE_REVIEW.md               # ä»£ç å®¡æŸ¥æŠ¥å‘Š
â””â”€â”€ PROGRESS.md                  # å¼€å‘è¿›åº¦æ–‡æ¡£
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æ—¶åºæ ‡å‡†åŒ– (Temporal Normalization)

```python
from mimir_native.content_processor import TemporalNormalizer

tn = TemporalNormalizer()
result = tn.normalize("I visited yesterday.", "8 May 2023")
# è¾“å‡º: "I visited 07 May 2023."
```

æ”¯æŒçš„æ ¼å¼ï¼š
- yesterday â†’ 07 May 2023
- last year â†’ 2022
- next week â†’ 15 May 2023
- last Saturday â†’ 06 May 2023

### 2. æ™ºèƒ½äº‹å®æå–

```python
from mimir_native.content_processor import ContentProcessor

processor = ContentProcessor(llm_client)
memories = processor.process_conversation(
    messages=[
        {"speaker": "Caroline", "text": "I visited the group yesterday."}
    ],
    session_date="8 May 2023"
)
```

### 3. æ··åˆæ£€ç´¢

```python
# è¯­ä¹‰ + å…³é”®è¯ + æ—¶é—´è¿‡æ»¤
results = mimir.query(
    query="Caroline's identity",
    filters={
        "time_range": "last_month",
        "entities": ["Caroline"]
    }
)
```

---

## ğŸš§ å·²çŸ¥é™åˆ¶

1. **LoCoMo F1**: 12% ä»ä½äºäººç±»æ°´å¹³ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–æ£€ç´¢å’Œç­”æ¡ˆç”Ÿæˆ
2. **å¤æ‚æ—¶é—´**: "the week before 9 June 2023" ç­‰å¤æ‚è¡¨è¾¾å¼è§£æä¸å®Œå–„
3. **å¤šè·³æ¨ç†**: éœ€è¦è·¨å¤šä¸ªè®°å¿†ç‰‡æ®µçš„æ¨ç†èƒ½åŠ›æœ‰é™

---

## ğŸ“ˆ å¼€å‘è·¯çº¿å›¾

| é˜¶æ®µ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| Phase 1 | åŸºç¡€è®°å¿†å±‚ (å­˜å‚¨ + æ£€ç´¢) | âœ… å®Œæˆ |
| Phase 2 | æ—¶åºæ ‡å‡†åŒ– + äº‹å®æå– | âœ… å®Œæˆ |
| Phase 3 | **Context Bridge** (è·¨å¹³å°é›†æˆ) | ğŸš§ è¿›è¡Œä¸­ |
| Phase 4 | æ•°æ®å¼•åŠ›äº• (å¾®ä¿¡/Plaud/çœ¼é•œæ¥å…¥) | ğŸ“‹ è®¡åˆ’ä¸­ |
| Phase 5 | ä¸ªäºº AI åŠ©æ‰‹ (Mimir Agent) | ğŸ“‹ è®¡åˆ’ä¸­ |

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ PRï¼

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

---

**Built with â¤ï¸ by Amy & å·¦å³**
